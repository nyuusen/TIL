# Makefile

## Makefileの基本

- 全てはここに載っている：[GNU make](https://www.gnu.org/software/make/manual/make.html)

## 細かなTips

### .PHONY

- ターゲットと同名のファイルが実行ディレクトリ以下に存在していた場合、makeコマンドはターゲットに指定されているコマンドを実行しないというのがデフォルト
- .PHONYにターゲットを書くことで、ファイルの存在有無関係なく、コマンドを実行してくれる
- もし仮に同名のファイルが作成されてしまったためにmakeコマンドが実行されなくなってしまう等の問題を避けることを目的としている
- 全てのターゲットは.PHONYに指定するで良さそう

### 変数展開

- 即時展開(:=)と遅延展開(=)の2種類がある（本当はもっとある)
  - 即時展開(:=)
    - 定義の段階で一度だけ即時で評価される
    - 常に結果を固定したい場合や計算コストが高い処理を一度だけ実行し、その値を使い回ししたい場合に使用する
  - 遅延展開(=)
    - 使用される度に右辺を評価される
    - 動的な値が必要な場合に使用する
- 参考
  - [Makeの変数における代入タイプについて - Howdunnit](https://weblog.grimoh.net/entry/2020/06/01/000000)
