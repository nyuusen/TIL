# システム設計の面接試験

## 1章 ユーザー数ゼロから数百万人へのスケールアップ

- NoSQLを選択するケース
  - アプリケーションに超低遅延が必要な場合
  - 非構造化データを扱う場合
  - リレーショナルデータがない場合
  - データのシリアライズとデシリアライズだけが必要な場合(JSON,YAML等)
  - 大量データの保存が必要な場合
- シャーディング
  - 水平スケーリングを実現
  - ユーザーID % 4というハッシュ関数を元にサーバーを振り分けている
  - この場合ユーザーIDがシャーディングキーとなり、シャーディングキーはどうするかは重要な戦略
  - ただシャーディングにはいくつかの問題がある
    - データ量の偏りや特定シャードに負荷がかかり、再シャードが必要になる→解決方法として一貫性ハッシュがよく使われる
    - セレブ問題といわれる特定シャードに過負荷がかかる
    - シャード間でのジョイン操作が難しい。対策としては非正規化して単一テーブルで実行できるようにする
  - この章では一部非リレーショナルな機能はNoSQLを採用し、RDBへの負荷を軽減
- 感想
  - この章はアプリケーションにおける各レイヤの基本的なスケール戦略が紹介されていて良かった

## 2章 おおまかな見積もり
